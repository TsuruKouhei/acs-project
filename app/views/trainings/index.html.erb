<h1>Trainings</h1>

<%= form_with(url: trainings_path, method: :get, local: true) do |form| %>
  <div class="field">
    <%= form.label :title, "タイトル" %>
    <%= form.text_field :title %>
  </div>
  <div class="field">
    <%= form.label :crop_id, "作物の種類" %>
    <%= form.select :crop_id, Crop.all.pluck(:title, :id), include_blank: true %>
  </div>
  <div class="field">
    <%= form.label :category_id, "カテゴリーの種類" %>
    <%= form.select :category_id, Category.all.pluck(:title, :id), include_blank: true %>
  </div>
  <div class="actions">
    <%= form.submit "検索" %>
  </div>
<% end %>

<table>
  <thead>
    <tr>
      <th>タイトル</th>
      <th>カテゴリー</th>
      <th>作物の種類</th>
      <th>登録日時</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @trainings.each do |training| %>
      <tr>
        <td><%= training.title %></td>
        <td><%= training.category.title %></td>
        <td><%= training.crop.title %></td>
        <td><%= training.updated_at.strftime('%Y-%m-%d %H:%M') %></td>
        <td><%= link_to '詳細', training %></td>
        <td><%= link_to '編集', edit_training_path(training) %></td>
        <td><%= link_to '削除', training, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @trainings %>

<br>

<%= link_to 'トレーニングデータ新規登録', new_training_path %>
