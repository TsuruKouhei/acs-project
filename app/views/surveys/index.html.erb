<h1>質問一覧</h1>

<h3>質問の検索</h3>
<%= search_form_for @q, url: surveys_path, method: :get do |f| %>
  <%= f.label :user_name, 'ユーザー名' %>
  <%= f.search_field :user_name, value: params.dig(:q, :user_name) %>
  <%= f.label :category_id_eq, 'カテゴリー' %>
  <%= f.collection_select :category_id_eq, Category.all, :id, :title, include_blank: '' %>
  <%= f.label :crop_id_eq, '作物の種類' %>
  <%= f.collection_select :crop_id_eq, Crop.all, :id, :title, include_blank: '' %>
  <%= f.label :title_cont, '質問内容' %>
  <%= f.search_field :title_cont %>
  <%= f.label :is_useful_eq, '回答が役立ったか' %>
  <%= f.select :is_useful_eq, [['はい', true], ['いいえ', false]], include_blank: '' %>
  <%= f.label :is_request_eq, '回答の依頼' %>
  <%= f.select :is_request_eq, [['はい', true], ['いいえ', false]], include_blank: '' %>
  <br>
  <%= f.submit '検索' %>
<% end %>

<table>
  <thead>
    <tr>
      <th>ユーザー名</th>
      <th>カテゴリー</th>
      <th>作物の種類</th>
      <th>質問内容</th>
      <th>チャットボットの<br>回答が役立った</th>
      <th>コンサルタントに<br>回答を依頼する</th>
      <th>質問日時</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @surveys.each do |survey| %>
      <tr>
        <td><%= survey.user.name %></td>
        <td><%= survey.category.title %></td>
        <td><%= survey.crop.title %></td>
        <td><%= survey.title %></td>
        <td><%= survey.is_useful ? 'はい' : 'いいえ' %></td>
        <td><%= survey.is_request ? 'はい' : 'いいえ' %></td>
        <td><%= survey.created_at %></td>
        <td><%= link_to '詳細', survey %></td>
        <td><%= link_to '編集', edit_survey_path(survey) %></td>
        <td><%= link_to '削除', survey, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @surveys %>

<br>

<%= link_to 'チャットボット画面', new_survey_path %>
