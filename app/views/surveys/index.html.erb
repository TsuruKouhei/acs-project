<div class="container mt-4" style="max-width: 90%;">
  <h1 class="text-center">アンケート一覧</h1>
  <%= search_form_for @q, url: surveys_path, method: :get, html: { class: 'search-form' } do |f| %>
    <div class="form-row justify-content-left">
      <div class="col-md-2 mt-3 d-flex" style="white-space: nowrap;">
        <%= f.label :user_name, 'ユーザー名', class: 'form-label mr-2' %>
        <%= f.search_field :user_name, value: params.dig(:q, :user_name), class: 'form-control' %>
      </div>
      <div class="col-md-3 mt-3 d-flex" style="white-space: nowrap;">
        <%= f.label :title_cont, '質問内容', class: 'form-label mr-2' %>
        <%= f.search_field :title_cont, class: 'form-control' %>
      </div>
    </div>
    <div class="form-row justify-content-left">
      <div class="col-md-2 mt-4">
        <%= f.label :category_id_eq, 'カテゴリー', class: 'form-label' %>
        <%= f.collection_select :category_id_eq, Category.all, :id, :title, include_blank: '', class: 'form-control' %>
      </div>
      <div class="col-md-2 mt-4">
        <%= f.label :crop_id_eq, '作物の種類', class: 'form-label' %>
        <%= f.collection_select :crop_id_eq, Crop.all, :id, :title, include_blank: '', class: 'form-control' %>
      </div>
      <div class="col-md-3 mt-4">
        <%= f.label :is_useful_eq, 'チャットボットの回答が役立った', class: 'form-label' %>
        <%= f.select :is_useful_eq, [['はい', true], ['いいえ', false]], include_blank: '', class: 'form-control' %>
      </div>
      <div class="col-md-3 mt-4">
        <%= f.label :is_request_eq, 'コンサルタントに回答を依頼する', class: 'form-label' %>
        <%= f.select :is_request_eq, [['はい', true], ['いいえ', false]], include_blank: '', class: 'form-control' %>
      </div>
    </div>
    <div class="col-md-12 text-center mt-3">
      <%= f.submit '検索', class: 'btn btn-secondary' %>
    </div>
  <% end %>
</div>

<div class="table-container mt-4" style="max-width: 95%;">
  <table class="table table-striped">
    <thead style="background-color: #aaf2c4;">
      <tr>
        <th>ユーザー名</th>
        <th>質問内容</th>
        <th>カテゴリー</th>
        <th>作物の種類</th>
        <th>チャットボット<br>が役立った</th>
        <th>コンサルタント<br>に依頼する</th>
        <th>アンケート日時</th>
        <th colspan="3"></th>
      </tr>
    </thead>
    <tbody>
      <% @surveys.each do |survey| %>
        <tr>
          <td><%= link_to survey.user.name, admin_user_path(survey.user) %></td>
          <td><%= survey.title %></td>
          <td><%= survey.category.title %></td>
          <td><%= survey.crop.title %></td>
          <td><%= survey.is_useful ? 'はい' : 'いいえ' %></td>
          <td><%= survey.is_request ? 'はい' : 'いいえ' %></td>
          <td><%= survey.created_at.strftime('%Y-%m-%d %H:%M') %></td>
          <td><%= link_to '詳細', survey, class: 'btn btn-primary btn-sm' %></td>
          <td><%= link_to '編集', edit_survey_path(survey), class: 'btn btn-warning btn-sm' %></td>
          <td><%= link_to '削除', survey, method: :delete, data: { confirm: '削除しますがよろしいですか?' }, class: 'btn btn-danger btn-sm' %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <div class="table-pagination">
    <%= paginate @surveys %>
  </div>
</div>
